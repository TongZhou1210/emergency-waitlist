<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hospital Triage – Admin</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="admin-body">
<header class="app-header">
    <h1 class="app-title">Hospital Triage – Admin</h1>
</header>

<main class="main">
    <section class="card card-wide">
        <h2 class="card-title">Patient List</h2>

        <!-- Search bar for patient ID -->
        <div class="form-group">
            <label for="adminSearchId">Search patient by ID</label>
            <div class="search-group">
                <input id="adminSearchId"
                       type="search"
                       placeholder="Enter patient ID">
                <button type="button"
                        class="search-button"
                        onclick="filterPatients()"
                        aria-label="Search">
                    &#128269;
                </button>
            </div>
            <p id="adminSearchMessage" class="form-hint"></p>
        </div>

        <!-- Scroll container for long patient list -->
        <div class="table-scroll">
            <table class="data-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Triage</th>
                    <th>Wait Time</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody id="patientTableBody">
                <!-- Example patient row -->
                <tr data-patient-id="00123">
                    <td>
                        <!-- Patient info link carries id param -->
                        <a href="admin_patient_info.html?id=00123"
                           class="patient-id-link"
                           title="View patient details">
                            00123
                        </a>
                    </td>
                    <td>John Doe</td>
                    <td>29</td>
                    <td><span class="pill pill-level-2">Level 2</span></td>
                    <td>25 mins</td>
                    <td>
                        <!-- Update button also carries id param -->
                        <a href="admin_update_priority.html?id=00123"
                           class="btn btn-primary">
                            Update
                        </a>
                    </td>
                </tr>
                <!-- If you add more patients, copy the row above and change data-patient-id and URLs -->
                </tbody>
            </table>
        </div>
    </section>

    <nav class="bottom-nav">
        <a href="patient_home.html" class="nav-link">Switch to Patient View</a>
    </nav>
</main>

<script>
    function filterPatients() {
        const input = document.getElementById('adminSearchId');
        const messageEl = document.getElementById('adminSearchMessage');
        const tbody = document.getElementById('patientTableBody');
        const rows = tbody.querySelectorAll('tr');

        const query = input.value.trim();
        let anyVisible = false;

        // If search is empty, show all rows
        if (!query) {
            rows.forEach(row => {
                row.style.display = '';
            });
            messageEl.textContent = '';
            return;
        }

        rows.forEach(row => {
            const pid = row.getAttribute('data-patient-id') || '';
            if (pid === query) {           // exact match
                row.style.display = '';
                anyVisible = true;
            } else {
                row.style.display = 'none';
            }
        });

        if (!anyVisible) {
            messageEl.textContent = 'No patient found with this ID.';
        } else {
            messageEl.textContent = '';
        }
    }
</script>

</body>
</html>